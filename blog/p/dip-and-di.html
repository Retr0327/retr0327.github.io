<!DOCTYPE html><html translate="no"><head><meta charSet="utf-8"/><title>Lixing Yang | Retr0327</title><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width"/><meta name="next-head-count" content="3"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://retr0327.github.io/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="https://retr0327.github.io/_next/static/chunks/4606.73d7645c3364d0cc.js"></script><script defer="" src="https://retr0327.github.io/_next/static/chunks/9373.30d01d879cf75ab5.js"></script><script defer="" src="https://retr0327.github.io/_next/static/chunks/9351.c5c3a780da9fef31.js"></script><script src="https://retr0327.github.io/_next/static/chunks/webpack-ace52f0c42e28142.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/framework-d789b5101218f83f.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/main-27b337bf8b76644b.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/pages/_app-60e2daddd43896d0.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/303-14a077f577ece843.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/889-c40598d410bbf03e.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/2613-f3f73e917482432f.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/655-875431f655a1e29b.js" defer=""></script><script src="https://retr0327.github.io/_next/static/chunks/pages/blog/p/%5Bslug%5D-8c6b16dab1b1b851.js" defer=""></script><script src="https://retr0327.github.io/_next/static/ku8eTtt8PoFPMMVyEjdX_/_buildManifest.js" defer=""></script><script src="https://retr0327.github.io/_next/static/ku8eTtt8PoFPMMVyEjdX_/_ssgManifest.js" defer=""></script><style data-emotion="mantine 480qv8 1a3p0sl hww1d8 1skajp8 xwn0wi 13sx1s4 1bz5baq jzm8jn k3ov3c 1gyv1kd czxoa0 166ler 1d564l0 1j2nc76 8k3bl3 1u21j8r c542eu 1h9bkrk gg5lvv g7i2bv 1k1m72v 134qpd7 j2asd1 1n8xhwj wageph xcwaj0 1gx475l 1x0uyal 1qy3e78 1t45alw iz7e2j 17vmaxh igxomf 7w2mec 1k7d522 tzaldo 1at92vn 4mxx2i lb8bda bzswy8 5fa1le 9rx0rd 4h3fuk c9guxy 1aaxqsw 1qr4geu g244cg 16ru5kt 1emc9ft wmue9l 1wpc1xj 1ryt1ht 108fia6 19wcmtv czlot8 1pxbv3r 2xwenz 2f1jty 14q4wgi 1lnagni rumokp 9u4ngu 1veg1ag la1fh2 1garq8f 1prcg0j 1qp7s2q 1iugybl qenwvq 1p3no9p yxmaw9 1uy1lj2 1wkdfe1 1dq8pan ujrsjw oir4dm b6zkvl 753b79 xa9bso fkl7uc 14n9mxy dstkpx 1un0c5e s24qcg 1yq019f d3lw81 1laz7pv 1q10uyr 1xepewt 1tg6bmv gr1fa1 hjzgrx yu8tn5 p1fm01 d983ux 1gjq6rq bjdv1c 1gvgsln 1gkhzb8 c90xfp 1ajh50z 3546c0 1deqy7c 138cww8 145inhf">.mantine-1a3p0sl{scroll-margin-top:3.75rem;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:calc(3.75rem - 1.5rem - 0.125rem);}@media (max-width: 47.5em){.mantine-1a3p0sl{padding-left:0;padding-right:0;}}.mantine-hww1d8{min-height:calc(100vh - 17.5rem);}.mantine-1skajp8{padding-left:1rem;height:3.75rem;padding-top:0.375rem;color:#101113;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.mantine-1skajp8:hover{color:black;}.mantine-xwn0wi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;pointer-events:all;}.mantine-13sx1s4{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;top:0;left:0;right:0;z-index:1001;height:3.75rem;max-height:3.75rem;position:static;box-sizing:border-box;background-color:#fff;border-bottom:0.0625rem solid #e9ecef;padding-left:1rem;padding-right:var(--removed-scroll-width, 0rem);border-bottom:0.0625rem solid #dee2e6;top:0;left:0;right:0;height:3.75rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:fixed;}.mantine-1bz5baq{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;}.mantine-1bz5baq,.mantine-1bz5baq::before,.mantine-1bz5baq::after{display:block;width:1.125rem;height:calc(1.125rem / 12);background-color:#000;outline:0.0625rem solid transparent;transition-property:background-color,transform;transition-duration:300ms;}@media (prefers-reduced-motion){.mantine-1bz5baq,.mantine-1bz5baq::before,.mantine-1bz5baq::after{transition-duration:0ms;}}.mantine-1bz5baq::before,.mantine-1bz5baq::after{position:absolute;content:"";left:0;}.mantine-1bz5baq::before{top:calc((1.125rem / 3) * -1);}.mantine-1bz5baq::after{top:calc(1.125rem / 3);}.mantine-1bz5baq[data-opened]{background-color:transparent;}.mantine-1bz5baq[data-opened]::before{-webkit-transform:translateY(calc(1.125rem / 3)) rotate(45deg);-moz-transform:translateY(calc(1.125rem / 3)) rotate(45deg);-ms-transform:translateY(calc(1.125rem / 3)) rotate(45deg);transform:translateY(calc(1.125rem / 3)) rotate(45deg);}.mantine-1bz5baq[data-opened]::after{-webkit-transform:translateY(calc(-1.125rem / 3)) rotate(-45deg);-moz-transform:translateY(calc(-1.125rem / 3)) rotate(-45deg);-ms-transform:translateY(calc(-1.125rem / 3)) rotate(-45deg);transform:translateY(calc(-1.125rem / 3)) rotate(-45deg);}.mantine-jzm8jn{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;border-radius:0.25rem;width:calc(1.125rem + 0.625rem);height:calc(1.125rem + 0.625rem);padding:calc(0.625rem / 2);cursor:pointer;margin-right:1rem;}.mantine-jzm8jn:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-jzm8jn:focus:not(:focus-visible){outline:none;}@media (min-width: 48em){.mantine-jzm8jn{display:none;}}.mantine-k3ov3c{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;gap:1rem;}.mantine-k3ov3c>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.mantine-1gyv1kd{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;margin-bottom:0.3125rem;}.mantine-1gyv1kd:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1gyv1kd:focus:not(:focus-visible){outline:none;}.mantine-czxoa0{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;gap:0.3125rem;}.mantine-czxoa0>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}@media (max-width: 47.9375em){.mantine-czxoa0{display:none;}}.mantine-166ler{display:block;line-height:1;padding:0.5rem 0.75rem;border-radius:1rem;-webkit-text-decoration:none;text-decoration:none;color:#495057;font-size:1rem;font-weight:600;}.mantine-166ler:hover{color:black;}.mantine-1d564l0{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;}.mantine-1d564l0:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1d564l0:focus:not(:focus-visible){outline:none;}.mantine-1j2nc76{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;height:2.125rem;padding-left:0.75rem;padding-right:0.3125rem;border-radius:0.5rem;color:#adb5bd;background-color:#fff;border:0.0625rem solid #dee2e6;}.mantine-1j2nc76:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1j2nc76:focus:not(:focus-visible){outline:none;}.mantine-1j2nc76:hover{background-color:rgba(248, 249, 250, 0.35);}@media (max-width: 47.9375em){.mantine-1j2nc76{display:none;}}.mantine-8k3bl3{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;gap:0.625rem;}.mantine-8k3bl3>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.mantine-1u21j8r{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:#868e96;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;padding-right:5rem;}.mantine-1u21j8r:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1u21j8r:focus:not(:focus-visible){outline:none;}.mantine-c542eu{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;position:relative;border-radius:0.25rem;padding:0;line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:1.75rem;min-height:1.75rem;width:1.75rem;min-width:1.75rem;border:0.0625rem solid transparent;background-color:transparent;color:#868e96;}.mantine-c542eu:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-c542eu:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-c542eu:hover{background-color:rgba(248, 249, 250, 1);}}@media (hover: none){.mantine-c542eu:active{background-color:rgba(248, 249, 250, 1);}}.mantine-c542eu:active{-webkit-transform:translateY(0.0625rem);-moz-transform:translateY(0.0625rem);-ms-transform:translateY(0.0625rem);transform:translateY(0.0625rem);}.mantine-c542eu [data-action-icon-loader]{max-width:70%;}.mantine-c542eu:disabled,.mantine-c542eu[data-disabled]{color:#ced4da;cursor:not-allowed;background-color:#f1f3f5;border-color:#f1f3f5;background-image:none;pointer-events:none;}.mantine-c542eu:disabled:active,.mantine-c542eu[data-disabled]:active{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;}.mantine-c542eu[data-loading]{pointer-events:none;}.mantine-c542eu[data-loading]::before{content:"";position:absolute;top:-0.0625rem;right:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;background-color:rgba(255, 255, 255, .5);border-radius:0.25rem;cursor:not-allowed;}@media (min-width: 48em){.mantine-c542eu{display:none;}}.mantine-1h9bkrk{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;gap:0.625rem;padding-right:1rem;}.mantine-1h9bkrk>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}@media (max-width: 47.9375em){.mantine-1h9bkrk{display:none;}}.mantine-gg5lvv{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;-webkit-tap-highlight-color:transparent;width:2.125rem;height:2.125rem;border-radius:0.5rem;border:0.0625rem solid #dee2e6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#495057;background-color:#fff;color:#fff;background-color:#0A66C2;border-color:#0A66C2;}.mantine-gg5lvv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-gg5lvv:focus:not(:focus-visible){outline:none;}.mantine-gg5lvv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-gg5lvv:focus:not(:focus-visible){outline:none;}.mantine-gg5lvv:hover{background-color:#f8f9fa;}@media (hover: hover){.mantine-gg5lvv:hover{background-color:rgba(35, 117, 200, 1);}}@media (hover: none){.mantine-gg5lvv:active{background-color:rgba(35, 117, 200, 1);}}.mantine-g7i2bv{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;-webkit-tap-highlight-color:transparent;width:2.125rem;height:2.125rem;border-radius:0.5rem;border:0.0625rem solid #dee2e6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#495057;background-color:#fff;color:#fff;background-color:#1778F2;border-color:#1778F2;}.mantine-g7i2bv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-g7i2bv:focus:not(:focus-visible){outline:none;}.mantine-g7i2bv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-g7i2bv:focus:not(:focus-visible){outline:none;}.mantine-g7i2bv:hover{background-color:#f8f9fa;}@media (hover: hover){.mantine-g7i2bv:hover{background-color:rgba(46, 134, 243, 1);}}@media (hover: none){.mantine-g7i2bv:active{background-color:rgba(46, 134, 243, 1);}}.mantine-1k1m72v{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;-webkit-tap-highlight-color:transparent;width:2.125rem;height:2.125rem;border-radius:0.5rem;border:0.0625rem solid #dee2e6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#495057;background-color:#fff;}.mantine-1k1m72v:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1k1m72v:focus:not(:focus-visible){outline:none;}.mantine-1k1m72v:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1k1m72v:focus:not(:focus-visible){outline:none;}.mantine-1k1m72v:hover{background-color:#f8f9fa;}.mantine-134qpd7{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;position:relative;border-radius:0.25rem;padding:0;line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:1.75rem;min-height:1.75rem;width:1.75rem;min-width:1.75rem;border:0.0625rem solid #228be6;background-color:transparent;color:#228be6;margin-right:1rem;}.mantine-134qpd7:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-134qpd7:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-134qpd7:hover{background-color:rgba(231, 245, 255, 0.35);}}@media (hover: none){.mantine-134qpd7:active{background-color:rgba(231, 245, 255, 0.35);}}.mantine-134qpd7:active{-webkit-transform:translateY(0.0625rem);-moz-transform:translateY(0.0625rem);-ms-transform:translateY(0.0625rem);transform:translateY(0.0625rem);}.mantine-134qpd7 [data-action-icon-loader]{max-width:70%;}.mantine-134qpd7:disabled,.mantine-134qpd7[data-disabled]{color:#ced4da;cursor:not-allowed;background-color:#f1f3f5;border-color:#f1f3f5;background-image:none;pointer-events:none;}.mantine-134qpd7:disabled:active,.mantine-134qpd7[data-disabled]:active{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;}.mantine-134qpd7[data-loading]{pointer-events:none;}.mantine-134qpd7[data-loading]::before{content:"";position:absolute;top:-0.0625rem;right:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;background-color:rgba(255, 255, 255, .5);border-radius:0.25rem;cursor:not-allowed;}@media (min-width: 48em){.mantine-134qpd7{display:none;}}.mantine-j2asd1{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;top:var(--mantine-header-height);left:0;bottom:0;z-index:1000;height:calc(100vh - var(--mantine-header-height, 0rem) - var(--mantine-footer-height, 0rem));width:100%;position:static;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#fff;border-right:0.0625rem solid #e9ecef;box-sizing:border-box;height:100vh;border-right:0.0625rem solid #e9ecef;background-color:#fff;position:fixed;z-index:5;top:0;bottom:0;left:0;width:260px;}@media (max-width: 61.9375em){.mantine-j2asd1[data-hidden]{display:none;}}@media (max-width: 47.5em){.mantine-j2asd1{display:none;}}.mantine-1n8xhwj{padding-right:1rem;padding-bottom:calc(0.625rem * 2);padding-left:1rem;padding-top:calc(3.75rem + 1rem);border-bottom:0.0625rem solid #dee2e6;-webkit-flex:0;-ms-flex:0;flex:0;box-sizing:border-box;}@media (max-width: 47.5em){.mantine-1n8xhwj{padding-bottom:120px;}}.mantine-wageph{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;height:2.125rem;padding-left:0.75rem;padding-right:0.3125rem;border-radius:0.5rem;color:#adb5bd;background-color:#fff;border:0.0625rem solid #dee2e6;width:100%;margin-bottom:1.25rem;}.mantine-wageph:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-wageph:focus:not(:focus-visible){outline:none;}.mantine-wageph:hover{background-color:rgba(248, 249, 250, 0.35);}@media (max-width: 47.9375em){.mantine-wageph{display:none;}}.mantine-xcwaj0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:1;-ms-flex:1;flex:1;}.mantine-1gx475l{margin-right:0.75rem;color:#868e96;}.mantine-1x0uyal{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;font-size:0.75rem;padding:0.5rem 0.625rem;border-radius:0.25rem;font-weight:500;color:#495057;}.mantine-1x0uyal:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1x0uyal:focus:not(:focus-visible){outline:none;}.mantine-1x0uyal:hover{background-color:#f8f9fa;color:#000;}.mantine-1x0uyal:hover .___ref-icon{color:#000;}.mantine-1qy3e78{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;font-size:0.75rem;padding:0.5rem 0.625rem;border-radius:0.25rem;font-weight:500;color:#495057;}.mantine-1qy3e78:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1qy3e78:focus:not(:focus-visible){outline:none;}.mantine-1qy3e78:hover{background-color:#f8f9fa;color:#000;}.mantine-1qy3e78:hover .___ref-icon{color:#000;}.mantine-1qy3e78,.mantine-1qy3e78:hover{background-color:#f8f9fa;color:#000;}.mantine-1qy3e78 .___ref-icon,.mantine-1qy3e78:hover .___ref-icon{color:#000;}.mantine-1t45alw{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.mantine-iz7e2j{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:0.625rem;height:1.125rem;line-height:calc(1.125rem - 0.125rem);-webkit-text-decoration:none;text-decoration:none;padding:0 calc(0.75rem / 1.5);box-sizing:border-box;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:auto;text-transform:uppercase;border-radius:2rem;font-weight:700;letter-spacing:0.015625rem;cursor:inherit;text-overflow:ellipsis;overflow:hidden;background:#228be6;color:#fff;border:0.0625rem solid transparent;padding:0;width:20px;height:20px;pointer-events:none;}.mantine-iz7e2j:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-iz7e2j:focus:not(:focus-visible){outline:none;}.mantine-17vmaxh{padding-left:16.25rem;}@media (max-width: 47.5em){.mantine-17vmaxh{padding-left:0;}}.mantine-igxomf{min-height:calc(100vh - 21.875rem);position:relative;z-index:1;background-color:#fff;box-shadow:0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05),rgba(0, 0, 0, 0.05) 0 0.625rem 0.9375rem -0.3125rem,rgba(0, 0, 0, 0.04) 0 0.4375rem 0.4375rem -0.3125rem;padding-bottom:5rem;}.mantine-7w2mec{height:400px;}@media (max-width: 50em){.mantine-7w2mec{height:460px;}}@media (max-width: 40em){.mantine-7w2mec{height:320px;}}.mantine-1k7d522{padding-top:calc(1.5rem * 2);padding-bottom:calc(1.5rem * 2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media (max-width: 62.5em){.mantine-1k7d522{padding-top:1.25rem;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media (max-width: 40em){.mantine-1k7d522{padding-top:0.75rem;padding-bottom:1rem;}}.mantine-tzaldo{max-width:18.75rem;}@media (max-width: 62.5em){.mantine-tzaldo{margin-bottom:1.5rem;}}@media (max-width: 40em){.mantine-tzaldo{margin-bottom:0;}}.mantine-1at92vn{border-top:0.0625rem solid #e9ecef;padding-top:1rem;}.mantine-4mxx2i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width: 40em){.mantine-4mxx2i{display:none;}}.mantine-lb8bda{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width: 40em){.mantine-lb8bda{display:block;}}.mantine-bzswy8{background-color:#f8f9fa;position:fixed;bottom:0;left:0;right:0;height:400px;padding-left:calc(16.25rem + 1rem * 2);padding-right:calc(1rem * 2);}@media (max-width: 50em){.mantine-bzswy8{height:460px;}}@media (max-width: 40em){.mantine-bzswy8{height:320px;}}@media (max-width: 67.5em){.mantine-bzswy8{padding-left:calc(16.25rem + 1rem);padding-right:1rem;}}@media (max-width: 47.5em){.mantine-bzswy8{padding-left:1rem;padding-right:1rem;}}.mantine-5fa1le{padding-left:1rem;padding-right:1rem;max-width:68.75rem;margin-left:auto;margin-right:auto;}.mantine-9rx0rd{object-fit:cover;width:100%;height:100%;display:block;}.mantine-4h3fuk{-webkit-tap-highlight-color:transparent;box-sizing:border-box;position:relative;display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;border-radius:6.25rem;-webkit-text-decoration:none;text-decoration:none;border:0;background-color:transparent;padding:0;width:4.375rem;min-width:4.375rem;height:4.375rem;}.mantine-4h3fuk:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-4h3fuk:focus:not(:focus-visible){outline:none;}.mantine-c9guxy{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:1rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-family:Monaco,Courier,monospace;}.mantine-c9guxy:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-c9guxy:focus:not(:focus-visible){outline:none;}.mantine-1aaxqsw{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;margin-top:0.625rem;color:#868e96;}.mantine-1aaxqsw:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1aaxqsw:focus:not(:focus-visible){outline:none;}.mantine-1qr4geu+.mantine-1qr4geu{margin-left:3.75rem;}@media (max-width: 62.5em){.mantine-1qr4geu+.mantine-1qr4geu{margin-left:2.5rem;}}.mantine-g244cg{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-size:1.125rem;font-weight:700;font-family:Greycliff CF,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin-bottom:calc(0.625rem / 2);color:#000;}.mantine-g244cg:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-g244cg:focus:not(:focus-visible){outline:none;}.mantine-16ru5kt{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;display:block;color:#868e96;font-size:0.875rem;padding-top:0.1875rem;padding-bottom:0.1875rem;}.mantine-16ru5kt:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-16ru5kt:focus:not(:focus-visible){outline:none;}.mantine-16ru5kt:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mantine-1emc9ft{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:1rem;}.mantine-1emc9ft>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.mantine-wmue9l{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:0.75rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;color:#868e96;}.mantine-wmue9l:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-wmue9l:focus:not(:focus-visible){outline:none;}.mantine-wmue9l a{-webkit-tap-highlight-color:transparent;color:#868e96;}.mantine-wmue9l a:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-wmue9l a:focus:not(:focus-visible){outline:none;}.mantine-1wpc1xj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:100%;overflow:visible;}.mantine-1ryt1ht{white-space:nowrap;height:100%;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.mantine-108fia6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:0.625rem;margin-right:1rem;}.mantine-19wcmtv{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;height:2.25rem;padding-left:calc(1.125rem  / 1.5);padding-right:1.125rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;display:inline-block;width:auto;border-radius:0.25rem;font-weight:600;position:relative;line-height:1;font-size:0.875rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;border:0.0625rem solid transparent;background-color:#228be6;color:#fff;border:0rem;height:2.625rem;padding-left:1.25rem;padding-right:1.25rem;background-color:#0A66C2;}.mantine-19wcmtv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-19wcmtv:focus:not(:focus-visible){outline:none;}.mantine-19wcmtv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-19wcmtv:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-19wcmtv:hover{background-color:#1c7ed6;}}@media (hover: none){.mantine-19wcmtv:active{background-color:#1c7ed6;}}.mantine-19wcmtv:active{-webkit-transform:translateY(0.0625rem);-moz-transform:translateY(0.0625rem);-ms-transform:translateY(0.0625rem);transform:translateY(0.0625rem);}.mantine-19wcmtv:disabled,.mantine-19wcmtv[data-disabled]{border-color:transparent;background-color:#e9ecef;color:#adb5bd;cursor:not-allowed;background-image:none;pointer-events:none;}.mantine-19wcmtv:disabled:active,.mantine-19wcmtv[data-disabled]:active{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;}.mantine-19wcmtv[data-loading]{pointer-events:none;}.mantine-19wcmtv[data-loading]::before{content:"";position:absolute;top:-0.0625rem;right:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;background-color:rgba(255, 255, 255, .5);border-radius:0.25rem;cursor:not-allowed;}@media (max-width: 40em){.mantine-19wcmtv{-webkit-flex:1;-ms-flex:1;flex:1;width:100%;margin-left:0;margin-top:1rem;}}@media (hover: hover){.mantine-19wcmtv:hover{background-color:rgba(35, 117, 200, 1);}}@media (hover: none){.mantine-19wcmtv:active{background-color:rgba(35, 117, 200, 1);}}.mantine-czlot8{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;height:2.25rem;padding-left:calc(1.125rem  / 1.5);padding-right:1.125rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;display:inline-block;width:auto;border-radius:0.25rem;font-weight:600;position:relative;line-height:1;font-size:0.875rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;border:0.0625rem solid transparent;background-color:#228be6;color:#fff;border:0rem;height:2.625rem;padding-left:1.25rem;padding-right:1.25rem;margin-left:1rem;background-color:#000;}.mantine-czlot8:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-czlot8:focus:not(:focus-visible){outline:none;}.mantine-czlot8:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-czlot8:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-czlot8:hover{background-color:#1c7ed6;}}@media (hover: none){.mantine-czlot8:active{background-color:#1c7ed6;}}.mantine-czlot8:active{-webkit-transform:translateY(0.0625rem);-moz-transform:translateY(0.0625rem);-ms-transform:translateY(0.0625rem);transform:translateY(0.0625rem);}.mantine-czlot8:disabled,.mantine-czlot8[data-disabled]{border-color:transparent;background-color:#e9ecef;color:#adb5bd;cursor:not-allowed;background-image:none;pointer-events:none;}.mantine-czlot8:disabled:active,.mantine-czlot8[data-disabled]:active{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;}.mantine-czlot8[data-loading]{pointer-events:none;}.mantine-czlot8[data-loading]::before{content:"";position:absolute;top:-0.0625rem;right:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;background-color:rgba(255, 255, 255, .5);border-radius:0.25rem;cursor:not-allowed;}@media (max-width: 40em){.mantine-czlot8{-webkit-flex:1;-ms-flex:1;flex:1;width:100%;margin-left:0;margin-top:1rem;}}@media (hover: hover){.mantine-czlot8:hover{background-color:rgba(26, 26, 26, 1);}}@media (hover: none){.mantine-czlot8:active{background-color:rgba(26, 26, 26, 1);}}.mantine-1pxbv3r{background-color:#fff;z-index:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-left:calc(1.5rem * 2);padding-right:calc(1.5rem * 2);}@media (max-width: 67.5em){.mantine-1pxbv3r{padding-left:1.5rem;padding-right:1.5rem;}}.mantine-2xwenz{margin-top:1.5rem;width:100%;max-width:67.5rem;margin-left:auto;margin-right:auto;}@media (max-width: 67.5em){.mantine-2xwenz{width:100%;padding-right:0;}}.mantine-2f1jty{-webkit-flex:0 0 16.25rem;-ms-flex:0 0 16.25rem;flex:0 0 16.25rem;}@media (max-width: 67.5em){.mantine-2f1jty{display:none;}}.mantine-14q4wgi{padding-top:3.125rem;max-width:67.625rem;margin-left:auto;margin-right:auto;padding-bottom:0.625rem;}@media (max-width: 67.5em){.mantine-14q4wgi{max-width:100%;padding-right:0;padding-bottom:1.5rem;}}.mantine-1lnagni{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:700;font-size:2.125rem;line-height:1.3;margin:0;font-size:2.75rem;margin-bottom:calc(0.625rem / 2);font-weight:900;color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1.5rem;}.mantine-1lnagni:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1lnagni:focus:not(:focus-visible){outline:none;}@media (max-width: 67.5em){.mantine-1lnagni{font-size:2rem;line-height:1.2;}}.mantine-rumokp{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:1.125rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;max-width:28.125rem;color:#868e96;margin-bottom:1.5rem;}.mantine-rumokp:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-rumokp:focus:not(:focus-visible){outline:none;}@media (max-width: 67.5em){.mantine-rumokp{font-size:1rem;}}.mantine-9u4ngu{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;gap:0.5rem;margin-right:0rem;}.mantine-9u4ngu>*{box-sizing:border-box;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.mantine-1veg1ag{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:0.6875rem;height:1.25rem;line-height:calc(1.25rem - 0.125rem);-webkit-text-decoration:none;text-decoration:none;padding:0 calc(1rem / 1.5);box-sizing:border-box;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:auto;text-transform:uppercase;border-radius:2rem;font-weight:700;letter-spacing:0.015625rem;cursor:inherit;text-overflow:ellipsis;overflow:hidden;background:linear-gradient(45deg, #4c6ef5 0%, #15aabf 100%);color:#fff;border:0rem solid transparent;cursor:pointer;}.mantine-1veg1ag:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1veg1ag:focus:not(:focus-visible){outline:none;}.mantine-la1fh2{-webkit-tap-highlight-color:transparent;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.mantine-la1fh2:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-la1fh2:focus:not(:focus-visible){outline:none;}.mantine-1garq8f{position:relative;top:-3.875rem;}.mantine-1prcg0j{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:700;font-size:1.625rem;line-height:1.35;margin:0;margin-top:calc(1.5rem * 1.2);margin-bottom:1rem;word-break:break-word;font-family:Greycliff CF,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#000;font-weight:600;}.mantine-1prcg0j:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1prcg0j:focus:not(:focus-visible){outline:none;}.mantine-1qp7s2q{position:relative;max-width:100%;max-width:34.375rem;}.mantine-1qp7s2q::before{content:"";height:0;display:block;padding-bottom:56.25%;}.mantine-1qp7s2q::after{content:"";display:table;clear:both;}.mantine-1qp7s2q>*:not(style){position:absolute;top:0rem;right:0rem;left:0rem;bottom:0rem;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}.mantine-1qp7s2q>img,.mantine-1qp7s2q>video{object-fit:cover;}.mantine-1iugybl{position:relative;}.mantine-qenwvq{margin:0;}.mantine-1p3no9p{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;display:block;width:100%;height:100%;border:0;border-radius:0rem;}.mantine-1uy1lj2{box-sizing:border-box;position:relative;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;line-height:1.7;font-size:0.8125rem;border-radius:0.25rem;padding:0.75rem 0;margin-top:0;margin-bottom:0;}.mantine-1wkdfe1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;padding:0 1rem;}.mantine-1dq8pan{width:100%;}.mantine-ujrsjw{position:relative;margin-bottom:1.25rem;}.mantine-oir4dm{-webkit-tap-highlight-color:transparent;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;cursor:pointer;border:0;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;font-size:1rem;background-color:transparent;text-align:left;color:#000;-webkit-text-decoration:none;text-decoration:none;box-sizing:border-box;position:relative;border-radius:0.25rem;padding:0;line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:1.75rem;min-height:1.75rem;width:1.75rem;min-width:1.75rem;border:0.0625rem solid transparent;background-color:transparent;color:#868e96;position:absolute;top:0.625rem;right:0.625rem;left:unset;z-index:2;}.mantine-oir4dm:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-oir4dm:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-oir4dm:hover{background-color:rgba(248, 249, 250, 1);}}@media (hover: none){.mantine-oir4dm:active{background-color:rgba(248, 249, 250, 1);}}.mantine-oir4dm:active{-webkit-transform:translateY(0.0625rem);-moz-transform:translateY(0.0625rem);-ms-transform:translateY(0.0625rem);transform:translateY(0.0625rem);}.mantine-oir4dm [data-action-icon-loader]{max-width:70%;}.mantine-oir4dm:disabled,.mantine-oir4dm[data-disabled]{color:#ced4da;cursor:not-allowed;background-color:#f1f3f5;border-color:#f1f3f5;background-image:none;pointer-events:none;}.mantine-oir4dm:disabled:active,.mantine-oir4dm[data-disabled]:active{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;}.mantine-oir4dm[data-loading]{pointer-events:none;}.mantine-oir4dm[data-loading]::before{content:"";position:absolute;top:-0.0625rem;right:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;background-color:rgba(255, 255, 255, .5);border-radius:0.25rem;cursor:not-allowed;}.mantine-oir4dm,.mantine-oir4dm:hover{background-color:#f8f9fa;}.mantine-b6zkvl{width:100%;height:100%;}.mantine-753b79{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:none;box-sizing:border-box;padding:calc(0.75rem  / 5);-webkit-transition:background-color 150ms ease,opacity 150ms ease;transition:background-color 150ms ease,opacity 150ms ease;}.mantine-753b79:hover{background-color:#f8f9fa;}.mantine-753b79:hover .___ref-thumb{background-color:rgba(0, 0, 0, 0.5);}.mantine-753b79[data-orientation="vertical"]{width:0.75rem;}.mantine-753b79[data-orientation="horizontal"]{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:0.75rem;}.mantine-753b79[data-state="hidden"]{display:none;opacity:0;}.mantine-xa9bso{overflow:hidden;}.mantine-fkl7uc{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;line-height:1.55;padding:0.125rem calc(0.625rem / 2);border-radius:0.25rem;color:#1A1B1E;background-color:rgba(248, 249, 250, 1);font-size:0.75rem;}.mantine-14n9mxy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.mantine-dstkpx{-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;}.mantine-1un0c5e{color:#868e96;margin-right:1.25rem;margin-top:0.125rem;width:1.375rem;}.mantine-s24qcg{display:block;font-size:0.875rem;margin-top:0.625rem;color:#868e96;overflow:hidden;text-overflow:ellipsis;}.mantine-1yq019f{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:1.125rem;line-height:1.55;color:#000;margin:0;border-top-right-radius:0.25rem;border-bottom-right-radius:0.25rem;padding:1rem 1.25rem;}.mantine-d3lw81{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:700;font-size:1.125rem;line-height:1.45;margin:0;margin-top:calc(1.5rem * 1.2);margin-bottom:1rem;word-break:break-word;font-family:Greycliff CF,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#000;font-weight:600;}.mantine-d3lw81:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-d3lw81:focus:not(:focus-visible){outline:none;}.mantine-1laz7pv{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:700;font-size:1.625rem;line-height:1.35;margin:0;font-weight:600;}.mantine-1laz7pv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1laz7pv:focus:not(:focus-visible){outline:none;}.mantine-1q10uyr{margin-top:1.875rem;}.mantine-1xepewt{box-sizing:border-box;display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:1rem 1rem;margin-top:2.5rem;}@media (max-width: 62.4375em){.mantine-1xepewt{grid-template-columns:repeat(1, minmax(0, 1fr));gap:1rem 1rem;}}.mantine-1tg6bmv{-webkit-tap-highlight-color:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;color:#000;padding:1rem;border-radius:0.5rem;background-color:#fff;border:0.0625rem solid #dee2e6;-webkit-transition:box-shadow 100ms ease,-webkit-transform 100ms ease;transition:box-shadow 100ms ease,transform 100ms ease;}.mantine-1tg6bmv:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1tg6bmv:focus:not(:focus-visible){outline:none;}@media (hover: hover){.mantine-1tg6bmv:hover{background-color:#fff;box-shadow:0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05),rgba(0, 0, 0, 0.05) 0 1.25rem 1.5625rem -0.3125rem,rgba(0, 0, 0, 0.04) 0 0.625rem 0.625rem -0.3125rem;-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01);}}@media (hover: none){.mantine-1tg6bmv:active{background-color:#fff;box-shadow:0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05),rgba(0, 0, 0, 0.05) 0 1.25rem 1.5625rem -0.3125rem,rgba(0, 0, 0, 0.04) 0 0.625rem 0.625rem -0.3125rem;-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01);}}.mantine-gr1fa1{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:1.125rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;text-align:right;}.mantine-gr1fa1:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-gr1fa1:focus:not(:focus-visible){outline:none;}.mantine-hjzgrx{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:#868e96;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;text-align:right;}.mantine-hjzgrx:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-hjzgrx:focus:not(:focus-visible){outline:none;}.mantine-yu8tn5{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:1.125rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;text-align:left;}.mantine-yu8tn5:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-yu8tn5:focus:not(:focus-visible){outline:none;}.mantine-p1fm01{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:#868e96;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;text-align:left;}.mantine-p1fm01:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-p1fm01:focus:not(:focus-visible){outline:none;}.mantine-d983ux{box-sizing:border-box;padding-left:1rem;position:-webkit-sticky;position:sticky;top:1.5rem;right:0;padding-top:3.4375rem;-webkit-flex:0 0 15rem;-ms-flex:0 0 15rem;flex:0 0 15rem;}@media (max-width: 67.5em){.mantine-d983ux{display:none;}}.mantine-1gjq6rq{padding-top:0;padding-bottom:1.5rem;padding-left:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}.mantine-bjdv1c{border-left:0.0625rem solid #dee2e6;}.mantine-1gvgsln{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1rem;}.mantine-1gkhzb8{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:inherit;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;margin-left:1rem;}.mantine-1gkhzb8:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-1gkhzb8:focus:not(:focus-visible){outline:none;}.mantine-c90xfp{max-height:calc(100vh - 8.75rem);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.mantine-1ajh50z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;}.mantine-3546c0{width:100%;height:100%;padding-right:0.75rem;padding-bottom:0.75rem;}.mantine-1deqy7c{overflow:hidden;}.mantine-138cww8{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;display:block;color:#495057;border-left:0.0625rem solid transparent;padding:0.5rem 1rem;margin-left:-1px;border-left-color:#339af0;background-color:#e7f5ff;color:#1971c2;padding-left:calc(1 * 1.25rem);}.mantine-138cww8:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-138cww8:focus:not(:focus-visible){outline:none;}.mantine-145inhf{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;-webkit-tap-highlight-color:transparent;color:inherit;font-size:0.875rem;line-height:1.55;-webkit-text-decoration:none;text-decoration:none;display:block;color:#495057;border-left:0.0625rem solid transparent;padding:0.5rem 1rem;margin-left:-1px;padding-left:calc(1 * 1.25rem);}.mantine-145inhf:focus{outline-offset:0.125rem;outline:0.125rem solid #339af0;}.mantine-145inhf:focus:not(:focus-visible){outline:none;}</style></head><body><div id="__next"><style data-emotion="css-global 1w883ez">html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section,figcaption,figure,main{display:block;}h1{font-size:2em;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background:transparent;text-decoration-skip:objects;}a:active,a:hover{outline-width:0;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;}b,strong{font-weight:bolder;}code,kbp,samp{font-family:monospace,monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;vertical-align:middle;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=reset],[type=submit]{-webkit-appearance:button;}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:0.0625rem dotted ButtonText;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0;}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto;}[type=search]{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;-moz-appearance:button;-ms-appearance:button;appearance:button;font:inherit;}details,menu{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}canvas{display:inline-block;}template{display:none;}</style><style data-emotion="css-global 1kvm0ug">*,*::before,*::after{box-sizing:border-box;}html{-webkit-print-color-scheme:light;color-scheme:light;}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;background-color:#fff;color:#000;line-height:1.55;font-size:1rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}</style><header class="mantine-Header-root mantine-13sx1s4"><button class="mantine-UnstyledButton-root mantine-Burger-root mantine-jzm8jn" type="button" aria-haspopup="menu" aria-expanded="false" aria-controls="mantine-R2mim-dropdown" id="mantine-R2mim-target"><div class="mantine-1bz5baq mantine-Burger-burger"></div></button><div class="mantine-Group-root mantine-k3ov3c"><div class="mantine-xwn0wi"><a class="mantine-1skajp8" href="/"><div class="mantine-Text-root mantine-1gyv1kd"> Lixing Yang </div></a></div></div><div class="mantine-Group-root mantine-k3ov3c"><div class="mantine-Group-root mantine-czxoa0"><a class="mantine-166ler" href="/"><div class="mantine-Text-root mantine-1d564l0">Home</div></a><a class="mantine-166ler" href="/blog/1"><div class="mantine-Text-root mantine-1d564l0">Blog</div></a></div><button class="mantine-UnstyledButton-root mantine-1j2nc76" type="button"><div class="mantine-Group-root mantine-8k3bl3"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-search"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg><div class="mantine-Text-root mantine-1u21j8r">Search</div></div></button><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-c542eu" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-search"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg></button><div class="mantine-Group-root mantine-1h9bkrk"><a class="mantine-UnstyledButton-root mantine-gg5lvv" href="https://www.linkedin.com/in/lixing-yang-1a2037230/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="20" height="20"><path fill="currentColor" d="M9,25H4V10h5V25z M6.501,8C5.118,8,4,6.879,4,5.499S5.12,3,6.501,3C7.879,3,9,4.121,9,5.499C9,6.879,7.879,8,6.501,8z M27,25h-4.807v-7.3c0-1.741-0.033-3.98-2.499-3.98c-2.503,0-2.888,1.896-2.888,3.854V25H12V9.989h4.614v2.051h0.065 c0.642-1.18,2.211-2.424,4.551-2.424c4.87,0,5.77,3.109,5.77,7.151C27,16.767,27,25,27,25z"></path></svg></a><a class="mantine-UnstyledButton-root mantine-g7i2bv" href="https://www.facebook.com/retr0327/"><svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 24 24" fill="none" width="22" height="22"><path fill="currentColor" d="M15.12,5.32H17V2.14A26.11,26.11,0,0,0,14.26,2C11.54,2,9.68,3.66,9.68,6.7V9.32H6.61v3.56H9.68V22h3.68V12.88h3.06l.46-3.56H13.36V7.05C13.36,6,13.64,5.32,15.12,5.32Z"></path></svg></a><a class="mantine-UnstyledButton-root mantine-1k1m72v" href="https://github.com/Retr0327"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="22" height="22" fill="currentColor"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a><button class="mantine-UnstyledButton-root mantine-1k1m72v" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-moon" style="width:18px;height:18px"><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></svg></button></div><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-134qpd7" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-moon" style="width:18px;height:18px"><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path></svg></button></div><style data-emotion="css-global 1vtycw9">:root{--mantine-header-height:3.75rem;}</style></header><nav class="mantine-Navbar-root mantine-j2asd1"><div class="mantine-1n8xhwj"><button class="mantine-UnstyledButton-root mantine-wageph" type="button"><div class="mantine-Group-root mantine-8k3bl3"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-search"><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg><div class="mantine-Text-root mantine-1u21j8r">Search</div></div></button><a class="mantine-UnstyledButton-root mantine-1x0uyal" href="/"><div class="mantine-xcwaj0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="___ref-icon mantine-1gx475l"><path d="M5 12l-2 0l9 -9l9 9l-2 0"></path><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path></svg><span>Home</span></div></a><a class="mantine-UnstyledButton-root mantine-1qy3e78" href="/blog/1"><div class="mantine-xcwaj0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="___ref-icon mantine-1gx475l"><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"></path><path d="M7 8h10"></path><path d="M7 12h10"></path><path d="M7 16h10"></path></svg><span>Blog</span></div></a><a class="mantine-UnstyledButton-root mantine-1x0uyal" href="/tags"><div class="mantine-xcwaj0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="___ref-icon mantine-1gx475l"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"></circle><path d="M4 7v3.859c0 .537 .213 1.052 .593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834 -4.834a2.025 2.025 0 0 0 0 -2.864l-8.117 -8.116a2.025 2.025 0 0 0 -1.431 -.593h-3.859a3 3 0 0 0 -3 3z"></path></svg><span>Tags</span></div><div class="mantine-Badge-root mantine-iz7e2j"><span class="mantine-1t45alw mantine-Badge-inner">4</span></div></a><a class="mantine-UnstyledButton-root mantine-1x0uyal" href="/archives/1"><div class="mantine-xcwaj0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="___ref-icon mantine-1gx475l"><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"></path><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"></path><path d="M10 12l4 0"></path></svg><span>Archives</span></div><div class="mantine-Badge-root mantine-iz7e2j"><span class="mantine-1t45alw mantine-Badge-inner">4</span></div></a></div><style data-emotion="css-global 1w82mqd">:root{--mantine-navbar-width:0rem;}</style></nav><main class="mantine-1a3p0sl"><div class="mantine-hww1d8"><div class="mantine-17vmaxh"><div class="mantine-igxomf"><article><div class="mantine-1pxbv3r"><div class="mantine-2xwenz"><div class="mantine-14q4wgi"><h1 class="mantine-Text-root mantine-Title-root mantine-1lnagni">Dependency Inversion Principle &amp; Dependency Injection</h1><div class="mantine-Text-root mantine-rumokp">發表於 <!-- -->2023-01-26<!-- --> | 更新於 2023-02-13</div><div class="mantine-Group-root mantine-9u4ngu"><a class="mantine-Badge-root mantine-1veg1ag" href="/tags/tag?id=design%20pattern&amp;page=1"><span class="mantine-1t45alw mantine-Badge-inner">design pattern</span></a></div></div><div><div id="tl-dr" class="mantine-1garq8f"></div><h2 class="mantine-Text-root mantine-Title-root mantine-1prcg0j"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#tl-dr"><div class="mantine-Text-root mantine-1d564l0">TL; DR</div></a></h2>
<p style="line-height:1.55">Dependency injection (DI) 是一種實現 dependency inversion principle (DIP) 的技術，而 DIP 是一種設計原則<sup><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="#user-content-fn-1">1</a></sup>。</p>
<div style="margin-top:-20px;margin-bottom:-20px"><div style="line-height:1.55"><div class="mantine-AspectRatio-root mantine-1qp7s2q"><div class="mantine-Image-root mantine-yxmaw9" style="width:100%"><figure class="mantine-qenwvq mantine-Image-figure"><div class="mantine-1iugybl mantine-Image-imageWrapper"><img class="mantine-1p3no9p mantine-Image-image" src="https://www.tutorialsteacher.com/Content/images/ioc/principles-and-patterns.png" alt="di-dip-relationship" style="object-fit:cover;width:100%;height:auto"/></div></figure></div></div></div></div>
<ul style="line-height:1.65;margin-bottom:20px;margin-top:10px">
<li style="margin-top:4px">DIP 是一種「設計原則」，強調高階模組不應該依賴於低階模組<sup><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="#user-content-fn-2">2</a></sup>，而是應該依賴於抽象。</li>
<li style="margin-top:4px">DI：是「實現 DIP」的方法，將 dependency 通過「注入」的方式提供給需要的 class 或 function。</li>
</ul>
<div id="依賴反轉原則-dependency-inversion-principle-dip" class="mantine-1garq8f"></div><h2 class="mantine-Text-root mantine-Title-root mantine-1prcg0j"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#%E4%BE%9D%E8%B3%B4%E5%8F%8D%E8%BD%89%E5%8E%9F%E5%89%87-dependency-inversion-principle-dip"><div class="mantine-Text-root mantine-1d564l0">依賴反轉原則 (Dependency Inversion Principle, DIP)</div></a></h2>
<p style="line-height:1.55">首先，為何要說「反轉」呢？更精確地說，<strong>為何要反轉呢</strong>？這是因為我們在開發的時候，往往都是讓大功能（高階模組）調用各個小功能（低階模組）來實現目標，但隨著層次越高，底下依賴的模組越多，所要改動的頻率就會提高。為了解耦 (decoupling)，DIP
提出了幾個重要的原則：</p>
<ul style="line-height:1.65;margin-bottom:20px;margin-top:10px">
<li style="margin-top:4px">使高階模組（呼叫者 caller）不再直接依賴低階模組（被呼叫者 callee），兩者都該依賴抽象</li>
<li style="margin-top:4px">抽象不應該依賴於具體實作方式。</li>
<li style="margin-top:4px">具體實作方式則應該依賴抽象。</li>
</ul>
<p style="line-height:1.55">DIP 告訴開發者應該要把重點放在「功能」上，不應該用低階模組去拼湊出高階，而是應該用「抽象層 (abstract
class、interface)」去隔開實作，解開高階與低階之間的耦合
(coupling)。</p>
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-bash" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token comment" style="color:#868e96"># 原本的關係</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">高階模組 → 低階模組</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token comment" style="color:#868e96"># 反轉後</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">高階模組 → 介面 ← 低階模組</span></div></div></pre></div></div></div></div>
<p style="line-height:1.55">高階模組提出它需要的功能，低階模組去實作出這些功能、達成高階模組的目標，就好比「公司為了做好的網站（高階模組的目標）」，開出了「應徵條件（介面）」，而我們前去應徵（低階模組的實作）。</p>
<p style="line-height:1.55">講完一些專有名詞，我們用 Python 來實作看看：</p>
<ul style="line-height:1.65;margin-bottom:20px;margin-top:10px">
<li style="margin-top:4px">
<p style="line-height:1.55">沒有使用 DIP：</p>
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">PostgreSQL</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">print</span><span class="token punctuation" style="color:#495057">(</span><span class="token string-interpolation string" style="color:#364fc7">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">}</span><span class="token string-interpolation string" style="color:#364fc7"> has been saved to PostgreSQL!&quot;</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">main</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    pg </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> PostgreSQL</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    pg</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token string" style="color:#364fc7">&quot;1@mail.com&quot;</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
<p style="line-height:1.55">乍看之下這樣寫似乎沒有什麼問題，但哪天我們不想用 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">PostgreSQL</code> 類別而是想用 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">MongoDB</code> 類別呢？</p>
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">MongoDB</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">print</span><span class="token punctuation" style="color:#495057">(</span><span class="token string-interpolation string" style="color:#364fc7">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">}</span><span class="token string-interpolation string" style="color:#364fc7"> has been saved to MongoDB!&quot;</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">main</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    mongo </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> MongoDB</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    mongo</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token string" style="color:#364fc7">&quot;1@mail.com&quot;</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
<p style="line-height:1.55">如果一直換 database 種類，<code class="mantine-Code-root mantine-fkl7uc" dir="ltr">main()</code> 豈不是每次都要修改，把代碼給寫死不是一個好辦法，因為會產生預想不到的耦合 (coupling)。</p>
</li>
<li style="margin-top:4px">
<p style="line-height:1.55">使用 DIP：</p>
<p style="line-height:1.55">為了使 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">main()</code> 不再直接與 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">PostgreSQL</code> 類別耦合 (coupling)，我們需要一個介面 (interface) 或抽象類別 (abstract
class)：</p>
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">from</span><span class="token plain"> abc </span><span class="token keyword" style="color:#c92a2a">import</span><span class="token plain"> ABC</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> abstractmethod</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">Database</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">ABC</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#495057">@abstractmethod</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">pass</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">PostgreSQL</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">Database</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">print</span><span class="token punctuation" style="color:#495057">(</span><span class="token string-interpolation string" style="color:#364fc7">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">}</span><span class="token string-interpolation string" style="color:#364fc7"> has been saved to PostgreSQL!&quot;</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">main</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    pg </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> PostgreSQL</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    pg</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token string" style="color:#364fc7">&quot;1@mail.com&quot;</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
<p style="line-height:1.55">這樣就實現了 DIP，主程式不再直接與 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">PostgreSQL</code> 類別耦合。如果你需要更換資料存儲方式，只需要實現一個新的類別並實現
<code class="mantine-Code-root mantine-fkl7uc" dir="ltr">Database</code> 抽象類別即可。</p>
</li>
</ul>
<p style="line-height:1.55">到這裡，不知道你有沒有發現什麼問題？我們在使用 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">Database</code> 功能之前，還是得先建立該類別的 instance (實例)，也就是
<code class="mantine-Code-root mantine-fkl7uc" dir="ltr">pg = PostgreSQL()</code>，這樣豈不是直接依賴了 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">PostgreSQL</code> 嗎？「依賴關係」是反轉了，但是還是要有 instance (實例)
才能使用。也就是說，這違反了 SOLID 中的 I (Interface Segregation Principle)。<code class="mantine-Code-root mantine-fkl7uc" dir="ltr">main()</code> 不應知道具體的 instance
class (實作類別) 是誰，具體的實作 應是可「替換」的。將對具體的依賴更改為對抽象的依賴，仍然是不夠的。面對這種問題，程式大老們提出了許多個解決的方法，其中一個就是
dependency injection (依賴注入)。</p>
<blockquote class="mantine-Blockquote-root mantine-1yq019f"><div class="mantine-14n9mxy mantine-Blockquote-inner"><div class="mantine-1un0c5e mantine-Blockquote-icon"><svg width="1.25rem" height="1.25rem" viewBox="0 0 409.294 409.294" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M0 204.647v175.412h175.412V204.647H58.471c0-64.48 52.461-116.941 116.941-116.941V29.235C78.684 29.235 0 107.919 0 204.647zM409.294 87.706V29.235c-96.728 0-175.412 78.684-175.412 175.412v175.412h175.412V204.647H292.353c0-64.48 52.461-116.941 116.941-116.941z"></path></svg></div><div class="mantine-dstkpx mantine-Blockquote-body">Without dependency injection, there is no dependency inversion principle.<cite class="mantine-s24qcg mantine-Blockquote-cite">– Arjan from ArjanCodes</cite></div></div></blockquote>
<div id="依賴注入-dependency-injection-di" class="mantine-1garq8f"></div><h2 class="mantine-Text-root mantine-Title-root mantine-1prcg0j"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#%E4%BE%9D%E8%B3%B4%E6%B3%A8%E5%85%A5-dependency-injection-di"><div class="mantine-Text-root mantine-1d564l0">依賴注入 (Dependency Injection, DI)</div></a></h2>
<p style="line-height:1.55">DI 指的是用各種方法把「低階模組」丟到「高階模組」裡。它將物件之間的依賴關係轉移到「創建物件」的地方。它的目的是為了減少耦合性，使得系統更加靈活和可維護。</p>
<p style="line-height:1.55">我們依舊用 database 的例子來實作 DI：</p>
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">from</span><span class="token plain"> abc </span><span class="token keyword" style="color:#c92a2a">import</span><span class="token plain"> ABC</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> abstractmethod</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">Database</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">ABC</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token decorator annotation punctuation" style="color:#495057">@abstractmethod</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">pass</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">PostgreSQL</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">Database</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">print</span><span class="token punctuation" style="color:#495057">(</span><span class="token string-interpolation string" style="color:#364fc7">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">}</span><span class="token string-interpolation string" style="color:#364fc7"> has been saved to PostgreSQL!&quot;</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">MongoDB</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">Database</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        </span><span class="token keyword" style="color:#c92a2a">print</span><span class="token punctuation" style="color:#495057">(</span><span class="token string-interpolation string" style="color:#364fc7">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">{</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#495057">}</span><span class="token string-interpolation string" style="color:#364fc7"> has been saved to MongoDB!&quot;</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain"></span><span class="token keyword" style="color:#c92a2a">class</span><span class="token plain"> </span><span class="token class-name" style="color:#c92a2a">UserService</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">__init__</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> db</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> Database</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"> </span><span class="token operator" style="color:#c92a2a">-</span><span class="token operator" style="color:#c92a2a">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#c92a2a">None</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        self</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">db </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> db</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain" style="display:inline-block">
</span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    </span><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">save_user</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#495057">,</span><span class="token plain"> email</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"> </span><span class="token builtin" style="color:#5c940d">str</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">        self</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">db</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
<p style="line-height:1.55">在這個例子中，我們利用建構式 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">__init__</code> 的方式，從外部傳入 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">Database</code>
抽象類別的實體來使用。我們再也不用為了換 database 而改變代碼，也不用因為實作細節或是方法名稱而煩惱，只要照 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">Database</code> 使用就可以了。</p>
<ul style="line-height:1.65;margin-bottom:20px;margin-top:10px">
<li style="margin-top:4px">
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">main</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    pg </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> PostgreSQL</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    user </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> UserService</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">pg</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    user</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save_user</span><span class="token punctuation" style="color:#495057">(</span><span class="token string" style="color:#364fc7">&quot;1@mail.com&quot;</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
</li>
<li style="margin-top:4px">
<div class="mantine-Prism-root mantine-ujrsjw" translate="no"><button class="mantine-UnstyledButton-root mantine-ActionIcon-root mantine-Prism-copy mantine-oir4dm" type="button" aria-label="Copy code"><svg width="1rem" height="1rem" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button><div class="mantine-ScrollArea-root mantine-Prism-scrollArea mantine-xa9bso" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-b6zkvl mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><pre class="mantine-1uy1lj2 mantine-Prism-code prism-code language-python" style="color:#212529;background-color:rgba(248, 249, 250, 0.65)" dir="ltr"><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token keyword" style="color:#c92a2a">def</span><span class="token plain"> </span><span class="token function" style="color:#5c940d">main</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token punctuation" style="color:#495057">:</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    mongo </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> MongoDB</span><span class="token punctuation" style="color:#495057">(</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    user </span><span class="token operator" style="color:#c92a2a">=</span><span class="token plain"> UserService</span><span class="token punctuation" style="color:#495057">(</span><span class="token plain">mongo</span><span class="token punctuation" style="color:#495057">)</span><span class="token plain"></span></div></div><div class="mantine-1wkdfe1 mantine-Prism-line token-line"><div class="mantine-1dq8pan mantine-Prism-lineContent"><span class="token plain">    user</span><span class="token punctuation" style="color:#495057">.</span><span class="token plain">save_user</span><span class="token punctuation" style="color:#495057">(</span><span class="token string" style="color:#364fc7">&quot;1@mail.com&quot;</span><span class="token punctuation" style="color:#495057">)</span></div></div></pre></div></div></div></div>
</li>
</ul>
<p style="line-height:1.55">至於要傳遞哪個 instance 進來，這份工作要交給開發者或當下的情境，就讓身為控制中心的 <code class="mantine-Code-root mantine-fkl7uc" dir="ltr">main()</code> 去決定，大家各司其職，落實
SOLID 中的 S (Single Responsibility)。</p>
<div id="總結" class="mantine-1garq8f"></div><h2 class="mantine-Text-root mantine-Title-root mantine-1prcg0j"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#%E7%B8%BD%E7%B5%90"><div class="mantine-Text-root mantine-1d564l0">總結</div></a></h2>
<p style="line-height:1.55">其實 DIP 與 DI 之間的關係是有<strong>先後順序</strong>的：</p>
<ol>
<li style="margin-top:4px">DIP 告訴我們依賴的對象應該是「功能」<!-- -->
<ul style="line-height:1.65;margin-bottom:20px;margin-top:10px">
<li style="margin-top:4px"><strong>高階模組不應該依賴於低階模組，兩者都應該依賴抽象</strong>：用 interface (介面) 或 abstract class (抽象類) 來進行隔離。</li>
<li style="margin-top:4px"><strong>抽象不應該依賴細節。細節應該依賴抽象</strong>：interface (介面) 或 abstract class (抽象類) 應該是高階模組提出的要求，然後才去使用實作了這些要求的低階模組。</li>
</ul>
</li>
<li style="margin-top:4px">為了解決介面實例化仍然會產生依賴的問題，為了解決就有了像是 dependency injection (DI) 等方法</li>
<li style="margin-top:4px">DI：藉由從「建構式傳遞」等方式，把低階模組交給高階模組使用者</li>
</ol>
<div id="參考資料" class="mantine-1garq8f"></div><h4 class="mantine-Text-root mantine-Title-root mantine-d3lw81"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><div class="mantine-Text-root mantine-1d564l0">參考資料</div></a></h4>
<ol>
<li style="margin-top:4px"><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="https://lotabout.me/2018/Dependency-Inversion-Principle/" target="_blank" rel="noopener noreferrer">DIP vs IoC vs DI</a></li>
<li style="margin-top:4px"><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="https://igouist.github.io/post/2020/12/oo-14-dependency-inversion-principle/" target="_blank" rel="noopener noreferrer">菜雞與物件導向 (14): 依賴反轉原則</a></li>
<li style="margin-top:4px"><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="https://notfalse.net/1/dip" target="_blank" rel="noopener noreferrer">依賴反向原則 (Dependency-Inversion Principle, DIP)</a></li>
<li style="margin-top:4px"><a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="https://www.youtube.com/watch?v=2ejbLVkCndI&amp;t=125s" target="_blank" rel="noopener noreferrer">Dependency INVERSION vs dependency INJECTION in Python</a></li>
</ol>
<section data-footnotes="true" class="footnotes"><div id="footnote-label" class="mantine-1garq8f"></div><h2 class="mantine-Text-root mantine-Title-root sr-only mantine-1laz7pv"><a class="mantine-la1fh2" href="/blog/p/dip-and-di#footnote-label"><div class="mantine-Text-root mantine-1d564l0">Footnotes</div></a></h2>
<ol>
<li id="user-content-fn-1" style="margin-top:4px">
<p style="line-height:1.55">SOLID 中的 D 就是 dependency inversion。 <a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="#user-content-fnref-1">↩</a></p>
</li>
<li id="user-content-fn-2" style="margin-top:4px">
<p style="line-height:1.55">高階與低階，指的是「相對關係」，也就是「呼叫者 (caller)」與「被呼叫者 (callee)」之間的關係。 <a class="mantine-Text-root mantine-1d564l0" style="font-size:15px" href="#user-content-fnref-2">↩</a></p>
</li>
</ol>
</section></div><div class="mantine-1q10uyr"></div><div class="mantine-SimpleGrid-root mantine-1xepewt"><a class="mantine-1tg6bmv" href="/blog/p/sql-group-by"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-left"><path d="M5 12l14 0"></path><path d="M5 12l6 6"></path><path d="M5 12l6 -6"></path></svg><div class="___ref-body mantine-480qv8"><div class="mantine-Text-root mantine-gr1fa1">Go back</div><div class="mantine-Text-root mantine-hjzgrx">理解 GROUP BY</div></div></a><a class="mantine-1tg6bmv" href="/blog/p/orm"><div class="___ref-body mantine-480qv8"><div class="mantine-Text-root mantine-yu8tn5">Up next</div><div class="mantine-Text-root mantine-p1fm01">ORM 基礎觀念</div></div><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-right"><path d="M5 12l14 0"></path><path d="M13 18l6 -6"></path><path d="M13 6l6 6"></path></svg></a></div></div><div class="mantine-2f1jty"><nav class="mantine-d983ux"><div class="mantine-1gjq6rq"><div><div class="mantine-1gvgsln"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-list"><path d="M9 6l11 0"></path><path d="M9 12l11 0"></path><path d="M9 18l11 0"></path><path d="M5 6l0 .01"></path><path d="M5 12l0 .01"></path><path d="M5 18l0 .01"></path></svg><div class="mantine-Text-root mantine-1gkhzb8">Table of contents</div></div><div class="mantine-c90xfp"><div class="mantine-1ajh50z"><div class="mantine-ScrollArea-root mantine-1deqy7c" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px" dir="ltr"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="mantine-3546c0 mantine-ScrollArea-viewport" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="mantine-bjdv1c"><a class="mantine-Text-root mantine-138cww8" href="#tl-dr">TL; DR</a><a class="mantine-Text-root mantine-145inhf" href="#依賴反轉原則-dependency-inversion-principle-dip">依賴反轉原則 (Dependency Inversion Principle, DIP)</a><a class="mantine-Text-root mantine-145inhf" href="#依賴注入-dependency-injection-di">依賴注入 (Dependency Injection, DI)</a><a class="mantine-Text-root mantine-145inhf" href="#總結">總結</a></div></div></div><div data-orientation="horizontal" data-state="hidden" class="mantine-753b79 mantine-ScrollArea-scrollbar" style="position:absolute;bottom:0;left:0;right:var(--radix-scroll-area-corner-width);--radix-scroll-area-thumb-width:18px"></div><div data-orientation="vertical" data-state="hidden" class="mantine-753b79 mantine-ScrollArea-scrollbar" style="position:absolute;top:0;right:0;bottom:var(--radix-scroll-area-corner-height);--radix-scroll-area-thumb-height:18px"></div></div></div></div></div></div></nav></div></div></article></div></div><div class="mantine-7w2mec"></div><div class="mantine-bzswy8"><div class="mantine-Container-root mantine-5fa1le"><div class="mantine-1k7d522"><div class="mantine-tzaldo"><div class="mantine-Group-root mantine-k3ov3c"><a href="/"><div class="mantine-Avatar-root mantine-4h3fuk"><img class="mantine-9rx0rd mantine-Avatar-image" src="https://i.imgur.com/6Dve09Q.jpg"/></div></a><a class="mantine-Text-root mantine-c9guxy" href="/">Lixing Yang</a></div><div class="mantine-Text-root mantine-1aaxqsw">Professional TypeScript, Golang, and Python programmer wannabe.</div></div><div class="mantine-4mxx2i"><div class="mantine-1qr4geu"><div class="mantine-Text-root mantine-g244cg">About</div><a class="mantine-Text-root mantine-16ru5kt" target="_blank" rel="noopener noreferrer" href="https://docs.google.com/document/d/1hiYT_QK5draFMMogwfwf5H2coHcJDveS/edit?usp=share_link&amp;ouid=115833122300012543204&amp;rtpof=true&amp;sd=true">CV</a><a class="mantine-Text-root mantine-16ru5kt" href="/blog/1">Blog</a></div><div class="mantine-1qr4geu"><div class="mantine-Text-root mantine-g244cg">Contact</div><a class="mantine-Text-root mantine-16ru5kt" href="https://www.linkedin.com/in/lixing-yang-1a2037230/">Follow on LinkedIn</a><a class="mantine-Text-root mantine-16ru5kt" href="https://github.com/Retr0327">Follow on Github</a><a class="mantine-Text-root mantine-16ru5kt" href="https://www.facebook.com/retr0327/">Follow on Facebook</a></div><div class="mantine-1qr4geu"><div class="mantine-Text-root mantine-g244cg">Organization</div><a class="mantine-Text-root mantine-16ru5kt" href="https://github.com/lopentu">LOPEN</a><a class="mantine-Text-root mantine-16ru5kt" href="https://github.com/Taiwan-Olympiad-in-Linguistics">IOLTW</a><a class="mantine-Text-root mantine-16ru5kt" href="https://github.com/Taiwan-Social-Media-Corpus">Taiwan Social Media Corpus</a></div></div></div><div class="mantine-1at92vn"><div class="mantine-Group-root mantine-1emc9ft"><div class="mantine-Text-root mantine-wmue9l">Built by<!-- --> <a href="https://github.com/Retr0327/retr0327.github.io">Lixing Yang</a></div><div class="mantine-lb8bda"><a class="mantine-UnstyledButton-root mantine-Button-root mantine-19wcmtv" type="button" data-button="true" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/lixing-yang-1a2037230/"><div class="mantine-1wpc1xj mantine-Button-inner"><span class="mantine-Button-icon mantine-Button-leftIcon mantine-108fia6"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="16" height="16"><path fill="currentColor" d="M9,25H4V10h5V25z M6.501,8C5.118,8,4,6.879,4,5.499S5.12,3,6.501,3C7.879,3,9,4.121,9,5.499C9,6.879,7.879,8,6.501,8z M27,25h-4.807v-7.3c0-1.741-0.033-3.98-2.499-3.98c-2.503,0-2.888,1.896-2.888,3.854V25H12V9.989h4.614v2.051h0.065 c0.642-1.18,2.211-2.424,4.551-2.424c4.87,0,5.77,3.109,5.77,7.151C27,16.767,27,25,27,25z"></path></svg></span><span class="mantine-1ryt1ht mantine-Button-label">Follow me on LinkedIn</span></div></a><a class="mantine-UnstyledButton-root mantine-Button-root mantine-czlot8" type="button" data-button="true" target="_blank" rel="noopener noreferrer" href="https://github.com/Retr0327"><div class="mantine-1wpc1xj mantine-Button-inner"><span class="mantine-Button-icon mantine-Button-leftIcon mantine-108fia6"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></span><span class="mantine-1ryt1ht mantine-Button-label">Follow me on Github</span></div></a></div></div></div></div></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    sup: \"sup\",\n    a: \"a\",\n    img: \"img\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    pre: \"pre\",\n    code: \"code\",\n    blockquote: \"blockquote\",\n    ol: \"ol\",\n    h4: \"h4\",\n    section: \"section\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      id: \"tl-dr\",\n      children: \"TL; DR\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Dependency injection (DI) 是一種實現 dependency inversion principle (DIP) 的技術，而 DIP 是一種設計原則\", _jsx(_components.sup, {\n        children: _jsx(_components.a, {\n          href: \"#user-content-fn-1\",\n          id: \"user-content-fnref-1\",\n          \"data-footnote-ref\": true,\n          \"aria-describedby\": \"footnote-label\",\n          children: \"1\"\n        })\n      }), \"。\"]\n    }), \"\\n\", _jsx(\"div\", {\n      style: {\n        marginTop: -20,\n        marginBottom: -20\n      },\n      children: _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"https://www.tutorialsteacher.com/Content/images/ioc/principles-and-patterns.png\",\n          alt: \"di-dip-relationship\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"DIP 是一種「設計原則」，強調高階模組不應該依賴於低階模組\", _jsx(_components.sup, {\n          children: _jsx(_components.a, {\n            href: \"#user-content-fn-2\",\n            id: \"user-content-fnref-2\",\n            \"data-footnote-ref\": true,\n            \"aria-describedby\": \"footnote-label\",\n            children: \"2\"\n          })\n        }), \"，而是應該依賴於抽象。\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"DI：是「實現 DIP」的方法，將 dependency 通過「注入」的方式提供給需要的 class 或 function。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"依賴反轉原則-dependency-inversion-principle-dip\",\n      children: \"依賴反轉原則 (Dependency Inversion Principle, DIP)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"首先，為何要說「反轉」呢？更精確地說，\", _jsx(_components.strong, {\n        children: \"為何要反轉呢\"\n      }), \"？這是因為我們在開發的時候，往往都是讓大功能（高階模組）調用各個小功能（低階模組）來實現目標，但隨著層次越高，底下依賴的模組越多，所要改動的頻率就會提高。為了解耦 (decoupling)，DIP\\n提出了幾個重要的原則：\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"使高階模組（呼叫者 caller）不再直接依賴低階模組（被呼叫者 callee），兩者都該依賴抽象\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"抽象不應該依賴於具體實作方式。\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"具體實作方式則應該依賴抽象。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"DIP 告訴開發者應該要把重點放在「功能」上，不應該用低階模組去拼湊出高階，而是應該用「抽象層 (abstract\\nclass、interface)」去隔開實作，解開高階與低階之間的耦合\\n(coupling)。\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"# 原本的關係\\n高階模組 → 低階模組\\n\\n# 反轉後\\n高階模組 → 介面 ← 低階模組\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"高階模組提出它需要的功能，低階模組去實作出這些功能、達成高階模組的目標，就好比「公司為了做好的網站（高階模組的目標）」，開出了「應徵條件（介面）」，而我們前去應徵（低階模組的實作）。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"講完一些專有名詞，我們用 Python 來實作看看：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"沒有使用 DIP：\"\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            children: \"class PostgreSQL:\\n    def save(self, data: str) -\u003e None:\\n        print(f\\\"{data} has been saved to PostgreSQL!\\\")\\n\\ndef main() -\u003e None:\\n    pg = PostgreSQL()\\n    pg.save(\\\"1@mail.com\\\")\\n\"\n          })\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"乍看之下這樣寫似乎沒有什麼問題，但哪天我們不想用 \", _jsx(_components.code, {\n            children: \"PostgreSQL\"\n          }), \" 類別而是想用 \", _jsx(_components.code, {\n            children: \"MongoDB\"\n          }), \" 類別呢？\"]\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            children: \"class MongoDB:\\n    def save(self, data: str) -\u003e None:\\n        print(f\\\"{data} has been saved to MongoDB!\\\")\\n\\ndef main() -\u003e None:\\n    mongo = MongoDB()\\n    mongo.save(\\\"1@mail.com\\\")\\n\"\n          })\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"如果一直換 database 種類，\", _jsx(_components.code, {\n            children: \"main()\"\n          }), \" 豈不是每次都要修改，把代碼給寫死不是一個好辦法，因為會產生預想不到的耦合 (coupling)。\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"使用 DIP：\"\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"為了使 \", _jsx(_components.code, {\n            children: \"main()\"\n          }), \" 不再直接與 \", _jsx(_components.code, {\n            children: \"PostgreSQL\"\n          }), \" 類別耦合 (coupling)，我們需要一個介面 (interface) 或抽象類別 (abstract\\nclass)：\"]\n        }), \"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            children: \"from abc import ABC, abstractmethod\\n\\nclass Database(ABC):\\n    @abstractmethod\\n    def save(self, data: str) -\u003e None:\\n        pass\\n\\nclass PostgreSQL(Database):\\n    def save(self, data: str) -\u003e None:\\n        print(f\\\"{data} has been saved to PostgreSQL!\\\")\\n\\ndef main() -\u003e None:\\n    pg = PostgreSQL()\\n    pg.save(\\\"1@mail.com\\\")\\n\"\n          })\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"這樣就實現了 DIP，主程式不再直接與 \", _jsx(_components.code, {\n            children: \"PostgreSQL\"\n          }), \" 類別耦合。如果你需要更換資料存儲方式，只需要實現一個新的類別並實現\\n\", _jsx(_components.code, {\n            children: \"Database\"\n          }), \" 抽象類別即可。\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"到這裡，不知道你有沒有發現什麼問題？我們在使用 \", _jsx(_components.code, {\n        children: \"Database\"\n      }), \" 功能之前，還是得先建立該類別的 instance (實例)，也就是\\n\", _jsx(_components.code, {\n        children: \"pg = PostgreSQL()\"\n      }), \"，這樣豈不是直接依賴了 \", _jsx(_components.code, {\n        children: \"PostgreSQL\"\n      }), \" 嗎？「依賴關係」是反轉了，但是還是要有 instance (實例)\\n才能使用。也就是說，這違反了 SOLID 中的 I (Interface Segregation Principle)。\", _jsx(_components.code, {\n        children: \"main()\"\n      }), \" 不應知道具體的 instance\\nclass (實作類別) 是誰，具體的實作 應是可「替換」的。將對具體的依賴更改為對抽象的依賴，仍然是不夠的。面對這種問題，程式大老們提出了許多個解決的方法，其中一個就是\\ndependency injection (依賴注入)。\"]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"[Arjan from ArjanCodes]Without dependency injection, there is no dependency inversion principle.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"依賴注入-dependency-injection-di\",\n      children: \"依賴注入 (Dependency Injection, DI)\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"DI 指的是用各種方法把「低階模組」丟到「高階模組」裡。它將物件之間的依賴關係轉移到「創建物件」的地方。它的目的是為了減少耦合性，使得系統更加靈活和可維護。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"我們依舊用 database 的例子來實作 DI：\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-python\",\n        children: \"from abc import ABC, abstractmethod\\n\\nclass Database(ABC):\\n    @abstractmethod\\n    def save(self, data: str) -\u003e None:\\n        pass\\n\\nclass PostgreSQL(Database):\\n    def save(self, data: str) -\u003e None:\\n        print(f\\\"{data} has been saved to PostgreSQL!\\\")\\n\\nclass MongoDB(Database):\\n    def save(self, data: str) -\u003e None:\\n        print(f\\\"{data} has been saved to MongoDB!\\\")\\n\\nclass UserService:\\n    def __init__(self, db: Database) -\u003e None:\\n        self.db = db\\n\\n    def save_user(self, email: str):\\n        self.db.save(email)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"在這個例子中，我們利用建構式 \", _jsx(_components.code, {\n        children: \"__init__\"\n      }), \" 的方式，從外部傳入 \", _jsx(_components.code, {\n        children: \"Database\"\n      }), \"\\n抽象類別的實體來使用。我們再也不用為了換 database 而改變代碼，也不用因為實作細節或是方法名稱而煩惱，只要照 \", _jsx(_components.code, {\n        children: \"Database\"\n      }), \" 使用就可以了。\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            children: \"def main():\\n    pg = PostgreSQL()\\n    user = UserService(pg)\\n    user.save_user(\\\"1@mail.com\\\")\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.pre, {\n          children: _jsx(_components.code, {\n            className: \"language-python\",\n            children: \"def main():\\n    mongo = MongoDB()\\n    user = UserService(mongo)\\n    user.save_user(\\\"1@mail.com\\\")\\n\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"至於要傳遞哪個 instance 進來，這份工作要交給開發者或當下的情境，就讓身為控制中心的 \", _jsx(_components.code, {\n        children: \"main()\"\n      }), \" 去決定，大家各司其職，落實\\nSOLID 中的 S (Single Responsibility)。\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"總結\",\n      children: \"總結\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"其實 DIP 與 DI 之間的關係是有\", _jsx(_components.strong, {\n        children: \"先後順序\"\n      }), \"的：\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"DIP 告訴我們依賴的對象應該是「功能」\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"高階模組不應該依賴於低階模組，兩者都應該依賴抽象\"\n            }), \"：用 interface (介面) 或 abstract class (抽象類) 來進行隔離。\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"抽象不應該依賴細節。細節應該依賴抽象\"\n            }), \"：interface (介面) 或 abstract class (抽象類) 應該是高階模組提出的要求，然後才去使用實作了這些要求的低階模組。\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"為了解決介面實例化仍然會產生依賴的問題，為了解決就有了像是 dependency injection (DI) 等方法\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"DI：藉由從「建構式傳遞」等方式，把低階模組交給高階模組使用者\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      id: \"參考資料\",\n      children: \"參考資料\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://lotabout.me/2018/Dependency-Inversion-Principle/\",\n          children: \"DIP vs IoC vs DI\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://igouist.github.io/post/2020/12/oo-14-dependency-inversion-principle/\",\n          children: \"菜雞與物件導向 (14): 依賴反轉原則\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://notfalse.net/1/dip\",\n          children: \"依賴反向原則 (Dependency-Inversion Principle, DIP)\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://www.youtube.com/watch?v=2ejbLVkCndI\u0026t=125s\",\n          children: \"Dependency INVERSION vs dependency INJECTION in Python\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.section, {\n      \"data-footnotes\": true,\n      className: \"footnotes\",\n      children: [_jsx(_components.h2, {\n        className: \"sr-only\",\n        id: \"footnote-label\",\n        children: \"Footnotes\"\n      }), \"\\n\", _jsxs(_components.ol, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          id: \"user-content-fn-1\",\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"SOLID 中的 D 就是 dependency inversion。 \", _jsx(_components.a, {\n              href: \"#user-content-fnref-1\",\n              \"data-footnote-backref\": true,\n              className: \"data-footnote-backref\",\n              \"aria-label\": \"Back to content\",\n              children: \"↩\"\n            })]\n          }), \"\\n\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          id: \"user-content-fn-2\",\n          children: [\"\\n\", _jsxs(_components.p, {\n            children: [\"高階與低階，指的是「相對關係」，也就是「呼叫者 (caller)」與「被呼叫者 (callee)」之間的關係。 \", _jsx(_components.a, {\n              href: \"#user-content-fnref-2\",\n              \"data-footnote-backref\": true,\n              className: \"data-footnote-backref\",\n              \"aria-label\": \"Back to content\",\n              children: \"↩\"\n            })]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"title":"Dependency Inversion Principle \u0026 Dependency Injection","createdAt":"2023-01-26","updatedAt":"2023-02-13","excerpt":"這篇想要記錄的是我在學 design patterns (設計模式) 的過程時，常常分不清 dependency injection 和 dependency inversion 之間的關係。因此借機寫成一個 blog，幫自己重新了解一次。","slug":"/blog/p/dip-and-di","category":["design pattern"],"coverImage":"https://stackify.com/wp-content/uploads/2018/06/Design-Patterns-Explained-%E2%80%93-Dependency-Injection-with-Code-Examples.png"}},"headings":[{"depth":2,"value":"TL; DR"},{"depth":2,"value":"依賴反轉原則 (Dependency Inversion Principle, DIP)"},{"depth":2,"value":"依賴注入 (Dependency Injection, DI)"},{"depth":2,"value":"總結"},{"depth":3,"value":"參考資料"}]},"posts":[{"frontMatter":{"title":"理解 GROUP BY","createdAt":"2023-04-16","excerpt":"之前在紀錄 ORM 時有提到為了避免 N+1，可以用 GROUP BY 來避免。因為 GROUP BY 很常在 SQL 中使用，所以是應該好好記下來才行。","slug":"/blog/p/sql-group-by","category":["sql"],"coverImage":"https://www.aviator.co/blog/wp-content/uploads/2023/03/postgres-logo-1024x576.png"}},{"frontMatter":{"title":"Dependency Inversion Principle \u0026 Dependency Injection","createdAt":"2023-01-26","updatedAt":"2023-02-13","excerpt":"這篇想要記錄的是我在學 design patterns (設計模式) 的過程時，常常分不清 dependency injection 和 dependency inversion 之間的關係。因此借機寫成一個 blog，幫自己重新了解一次。","slug":"/blog/p/dip-and-di","category":["design pattern"],"coverImage":"https://stackify.com/wp-content/uploads/2018/06/Design-Patterns-Explained-%E2%80%93-Dependency-Injection-with-Code-Examples.png"}},{"frontMatter":{"title":"ORM 基礎觀念","createdAt":"2023-02-07","updatedAt":"2023-02-13","excerpt":"很常在後端開發使用 ORM (Object-Relational Mapping) 來處理 database，但卻沒有清楚為何該使用它，只知道很多人推薦，於是打算好好紀錄一番。","slug":"/blog/p/orm","category":["sql"],"coverImage":"https://miro.medium.com/max/1200/1*Tz54hHWz7O2nWu5AeajVWQ.png"}},{"frontMatter":{"title":"孤獨的程式廢人 - Why Have a Blog?","createdAt":"2023-01-21","updatedAt":"2023-01-23","excerpt":"這篇講述了筆者為何突然在某個深夜突然想要重啟自己多年想要寫 blog 的計畫，礙於當時啥都不會只能套用別人的模板，導致無法做出自己想要的樣子。3 年後，且在參與多項計畫後，將帶著所學到的技術嘗試重返最初的感動。","slug":"/blog/p/hello-world","category":["experience","blog"],"coverImage":"https://i.imgur.com/aAe4oVE.png"}}],"frontMatter":{"title":"Dependency Inversion Principle \u0026 Dependency Injection","createdAt":"2023-01-26","updatedAt":"2023-02-13","excerpt":"這篇想要記錄的是我在學 design patterns (設計模式) 的過程時，常常分不清 dependency injection 和 dependency inversion 之間的關係。因此借機寫成一個 blog，幫自己重新了解一次。","slug":"/blog/p/dip-and-di","category":["design pattern"],"coverImage":"https://stackify.com/wp-content/uploads/2018/06/Design-Patterns-Explained-%E2%80%93-Dependency-Injection-with-Code-Examples.png"},"siblings":{"next":{"title":"ORM 基礎觀念","createdAt":"2023-02-07","updatedAt":"2023-02-13","excerpt":"很常在後端開發使用 ORM (Object-Relational Mapping) 來處理 database，但卻沒有清楚為何該使用它，只知道很多人推薦，於是打算好好紀錄一番。","slug":"/blog/p/orm","category":["sql"],"coverImage":"https://miro.medium.com/max/1200/1*Tz54hHWz7O2nWu5AeajVWQ.png"},"prev":{"title":"理解 GROUP BY","createdAt":"2023-04-16","excerpt":"之前在紀錄 ORM 時有提到為了避免 N+1，可以用 GROUP BY 來避免。因為 GROUP BY 很常在 SQL 中使用，所以是應該好好記下來才行。","slug":"/blog/p/sql-group-by","category":["sql"],"coverImage":"https://www.aviator.co/blog/wp-content/uploads/2023/03/postgres-logo-1024x576.png"}}},"colorScheme":"light","__N_SSG":true},"page":"/blog/p/[slug]","query":{"slug":"dip-and-di"},"buildId":"ku8eTtt8PoFPMMVyEjdX_","assetPrefix":"https://retr0327.github.io","isFallback":false,"dynamicIds":[4606,9373,1854,9351],"gsp":true,"appGip":true,"scriptLoader":[]}</script></body></html>